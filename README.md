# Mini X Developer Documentation

##IMPORTANT NOTE:
Do not edit Js & CSS files located under *catalog/view/theme/javascript* & *catalog/view/theme/default/stylesheet* !!!!!
These are files that are generated by grunt modules and are the final assets that we'll use on the site. See point 6 for explanation.

##Folder Structure
- admin: all the php for the admin section of the site
- catalog: all the php partials and assets for the front end of the site
- dev: All the CSS & Js for the site (please see point 6 on using grunt)
- theme_sample: The static build of the site

## Front End Guide

### Setting up the project to run locally (OS X)

####1.Download [MAMP](https://www.mamp.info/en/) on your Mac (free)	
This will run an apache server & a mySQL server on your mac. The installation path should be /Applications/MAMP

####2.Clone Repository
Clone this repository to */Applications/MAMP/htdocs/minixstyle* using a git client like [Sourcetree](https://www.sourcetreeapp.com/)

####3.Edit Hosts File	   
Open Mac Terminal (type terminal into spotlight search) and type ```sudo nano /private/etc/hosts``` and enter your password if required
Shift down to the ```127.0.0.1 localhost``` and on the next line add ```127.0.0.1 minixstyle.local``` in the same format as the localhost line above
Hold down *Control* and hit *X* - you will be prompted to save by hitting *Y* and *Enter/Return*

####4.Edit the vHosts file
Navigate to */Applications/MAMP/conf/apache/extra/httpd-vhosts.conf* and 
scroll down to the bottom, add the below & save
```
<VirtualHost *:80>
    DocumentRoot "/Applications/MAMP/htdocs/minixstyle"
    ServerName minixstyle.local
</VirtualHost> 
```

####5.Import the database		
Open your browser and navigate to *http://localhost/phpmyadmin*
Create a new database called *minix* and import the minix.sql database that you'll find in the root of the project at */Applications/MAMP/htdocs/minixstyle* (if this is unsuccessful, open the database in a text editor like Sublime Text and add ```--``` before line 22 - the create statement - to comment this out. Then try again).
Issues: If you have set up a different user/password on your phpmyadmin, you will need to change this in the *config.php* file in the root directory on lines 24 & 25 (replace 'root' with whatever you have chosen)

####6.Start MAMP Servers
Open MAMP and click 'start servers' - ensure that Apache Server & MySQL server lights turn green (Skype might possibly conflict with the MySQL Server if they run on the same port)

####7.Run Grunt and watch for changes
The front end of this site uses Grunt to watch Sass & Js files for changes and compiles them all to to minified files (this reduces http requests, keeps the css & js structure clean and tidy and speeds up the final running of the site)
You can run grunt by opening the Mac Terminal and navigating to */Applications/MAMP/htdocs/minixstyle* and typing ```grunt```. 
If this errors you might need to install Sass & Compass gems. You can do this in the terminal by typing:
```
gem install sass
```
and
```
gem install compass
```
Please try running grunt again after this by typing ```grunt``` again. This should start watching for changes.
All the front end files are located in *dev* folder and are organised under js & sass directories. Every change you make in here will compile to their appropriate assets folders *catalog/view/theme/javascript* & *catalog/view/theme/default/stylesheet*

The static php build files are located in *theme_sample/partials*

- Adding a new Css partial: Create the partial in *dev/sass/partials/modules* using this file name structure: ```_filename.scss``` and include it in *dev/sass/stylesheet.scss* (the import stylesheet) following the same structure that's been used in there (path route and comma at the end of the line - except the last line). Please keep this folder very organised!

- Adding a new Js partial: Create the partial in the *dev/js/modules/[appropriate_folder]* folder, please keep this very organised aswell! Create a new folder if needed for the correct page. This site uses jQuery - no need to use the document ready ```$( document ).ready(function() { });``` function as this is already running around the partial you've created. 
NOTE: Once you've created this partial, you will have to stop running grunt by going to the Mac Terminal and holding down 'Control' and hitting 'C', this will stop grunt from running. You can start it again by typing ```grunt``` - this will now pick up your new Javascript partial and compile it to the *main.js* file in the assets folder.


####8.Commit changes often and keep the project tidy!
Please keep this project organised and tidy - e.g. please avoid using Javascript inline in the php files as it makes it difficult for other people to find and slows the site down - please create a partial in the *dev/js/modules/* folder that wil compile to the main Js file. Obviously this isn't always possibly as php tags are used in certain partials such as the checkout but please follow this whenever possible.
If another developer is due to work on this project, please push all changes with Sourcetree/terminal and please don't work simultaneously as this might cause database conflicts if things are updated in the CMS. (If it's only front end (dev folder) changes, this shouldn't be a problem) - please export your database from http://localhost/phpmyadmin if passing the project on to someone else and overwrite the *minix.sql* file in the root of the project (then push changes to github).











